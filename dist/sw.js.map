{"version":3,"sources":["sw.js"],"names":["serviceWorkerOption","e","t","n","o","exports","s","i","l","call","m","c","d","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","importScripts","self","localforage","assets","entries","btoa","headers","a","JSON","parse","useCache","console","log","map","URL","location","toString","filter","includes","addEventListener","waitUntil","caches","open","then","addAll","catch","error","clients","claim","keys","Promise","all","indexOf","delete","navigator","onLine","serviceName","split","reverse","join","setItem","stringify","data","action","skipWaiting","request","method","url","origin","href","match","fetch","ok","status","type","clone","put","mode","respondWith","matchAll","postMessage","getItem","resolve","Response","body","errorHint","errorResponse","message","Blob","statusText","text","Function","window"],"mappings":"0jBAAA,GAAIA,CAAAA,mBAAmB,CAAG,CACxB,SAAU,CACR,gBADQ,CAER,aAFQ,CADc,CAA1B,CAOQ,CAAC,SAASC,CAAT,CAAW,CAAC,GAAIC,CAAAA,CAAC,CAAC,EAAN,CAAS,QAASC,CAAAA,CAAT,CAAWC,CAAX,CAAa,CAAC,GAAGF,CAAC,CAACE,CAAD,CAAJ,CAAQ,MAAOF,CAAAA,CAAC,CAACE,CAAD,CAAD,CAAKC,OAAZ,CAAoB,GAAIC,CAAAA,CAAC,CAACJ,CAAC,CAACE,CAAD,CAAD,CAAK,CAACG,CAAC,CAACH,CAAH,CAAKI,CAAC,CAAC,CAAC,CAAR,CAAUH,OAAO,CAAC,EAAlB,CAAX,CAAiC,MAAOJ,CAAAA,CAAC,CAACG,CAAD,CAAD,CAAKK,IAAL,CAAUH,CAAC,CAACD,OAAZ,CAAoBC,CAApB,CAAsBA,CAAC,CAACD,OAAxB,CAAgCF,CAAhC,EAAmCG,CAAC,CAACE,CAAF,CAAI,CAAC,CAAxC,CAA0CF,CAAC,CAACD,OAAQ,CAAAF,CAAC,CAACO,CAAF,CAAIT,CAAJ,CAAME,CAAC,CAACQ,CAAF,CAAIT,CAAV,CAAYC,CAAC,CAACS,CAAF,CAAI,SAASX,CAAT,CAAWC,CAAX,CAAaE,CAAb,CAAe,CAACD,CAAC,CAACC,CAAF,CAAIH,CAAJ,CAAMC,CAAN,GAAUW,MAAM,CAACC,cAAP,CAAsBb,CAAtB,CAAwBC,CAAxB,CAA0B,CAACa,UAAU,CAAC,CAAC,CAAb,CAAeC,GAAG,CAACZ,CAAnB,CAA1B,CAAiD,CAA3F,CAA4FD,CAAC,CAACc,CAAF,CAAI,SAAShB,CAAT,CAAW,CAAC,aAAa,MAAOiB,CAAAA,MAApB,EAA4BA,MAAM,CAACC,WAAnC,EAAgDN,MAAM,CAACC,cAAP,CAAsBb,CAAtB,CAAwBiB,MAAM,CAACC,WAA/B,CAA2C,CAACC,KAAK,CAAC,QAAP,CAA3C,CAAhD,CAA6GP,MAAM,CAACC,cAAP,CAAsBb,CAAtB,CAAwB,YAAxB,CAAqC,CAACmB,KAAK,CAAC,CAAC,CAAR,CAArC,CAAiD,CAA1Q,CAA2QjB,CAAC,CAACD,CAAF,CAAI,SAASD,CAAT,CAAWC,CAAX,CAAa,CAAC,GAAG,EAAEA,CAAF,GAAMD,CAAC,CAACE,CAAC,CAACF,CAAD,CAAT,EAAc,EAAEC,CAAnB,CAAqB,MAAOD,CAAAA,CAAP,CAAS,GAAG,EAAEC,CAAF,EAAK,UAAU,MAAOD,CAAAA,CAAtB,EAAyBA,CAAzB,EAA4BA,CAAC,CAACoB,UAAjC,CAA4C,MAAOpB,CAAAA,CAAP,CAAS,GAAIG,CAAAA,CAAC,CAACS,MAAM,CAACS,MAAP,CAAc,IAAd,CAAN,CAA0B,GAAGnB,CAAC,CAACc,CAAF,CAAIb,CAAJ,EAAOS,MAAM,CAACC,cAAP,CAAsBV,CAAtB,CAAwB,SAAxB,CAAkC,CAACW,UAAU,CAAC,CAAC,CAAb,CAAeK,KAAK,CAACnB,CAArB,CAAlC,CAAP,CAAkE,EAAEC,CAAF,EAAK,UAAU,MAAOD,CAAAA,CAA3F,CAA6F,IAAI,GAAIK,CAAAA,CAAR,GAAaL,CAAAA,CAAb,EAAeE,CAAC,CAACS,CAAF,CAAIR,CAAJ,CAAME,CAAN,CAAQ,SAASJ,CAAT,CAAW,CAAC,MAAOD,CAAAA,CAAC,CAACC,CAAD,CAAI,CAAxB,CAAyBqB,IAAzB,CAA8B,IAA9B,CAAmCjB,CAAnC,CAAR,CAAf,CAA8D,MAAOF,CAAAA,CAAE,CAA9iB,CAA+iBD,CAAC,CAACA,CAAF,CAAI,SAASF,CAAT,CAAW,CAAC,GAAIC,CAAAA,CAAC,CAACD,CAAC,EAAEA,CAAC,CAACoB,UAAL,CAAgB,UAAU,CAAC,MAAOpB,CAAAA,CAAC,CAACuB,OAAQ,CAA5C,CAA6C,UAAU,CAAC,MAAOvB,CAAAA,CAAE,CAAvE,CAAwE,MAAOE,CAAAA,CAAC,CAACS,CAAF,CAAIV,CAAJ,CAAM,GAAN,CAAUA,CAAV,EAAaA,CAAE,CAA7pB,CAA8pBC,CAAC,CAACC,CAAF,CAAI,SAASH,CAAT,CAAWC,CAAX,CAAa,CAAC,MAAOW,CAAAA,MAAM,CAACY,SAAP,CAAiBC,cAAjB,CAAgCjB,IAAhC,CAAqCR,CAArC,CAAuCC,CAAvC,CAA0C,CAAjuB,CAAkuBC,CAAC,CAACwB,CAAF,CAAI,EAAtuB,CAAyuBxB,CAAC,CAACA,CAAC,CAACG,CAAF,CAAI,CAAL,CAAQ,CAA74B,CAA84B,CAAC,SAASL,CAAT,CAAWC,CAAX,CAAaC,CAAb,CAAe,CAAC,CAAC,SAASF,CAAT,CAAW,CAAC2B,aAAa,CAAC,wEAAD,CAA0E,mEAA1E,CAAb,CAAkK,GAAA1B,CAAAA,CAAC,CAAC,CAAC,CAAH,CAAKC,CAAL,CAAO0B,IAAI,CAACC,WAAZ,CAAgC1B,CAAhC,CAAmCH,CAAC,CAACD,mBAArC,CAAyB+B,MAAzB,CAAyDzB,CAAzD,CAA2D,QAA3D,CAAoE,GAAIW,CAAAA,CAAC,WAAKb,CAAL,EAAO,IAAP,EAAL,CAAkB,QAASO,CAAAA,CAAT,CAAWV,CAAX,CAAa,CAAC,GAAIC,CAAAA,CAAC,CAAC,EAAN,CAAS,kBAAeD,CAAC,CAAC+B,OAAF,EAAf,yOAAU7B,CAAAA,EAAV,MAA2BD,CAAC,CAACC,EAAC,CAAC,CAAD,CAAF,CAAD,CAAQA,EAAC,CAAC,CAAD,CAApC,CAAwC,MAAOD,CAAAA,CAAE,SAASK,CAAAA,CAAT,CAAWN,CAAX,CAAa,CAAC,MAAOgC,CAAAA,IAAI,CAACA,IAAI,CAAChC,CAAC,CAACiC,OAAF,CAAUlB,GAAV,CAAc,aAAd,CAAD,CAAL,CAAoCf,CAAC,CAACiC,OAAF,CAAUlB,GAAV,CAAc,aAAd,CAA6B,SAASmB,CAAAA,CAAT,CAAWlC,CAAX,CAAa,CAAC,GAAG,CAAC,GAAMC,CAAAA,EAAC,CAACkC,IAAI,CAACC,KAAL,CAAWpC,CAAC,CAACiC,OAAF,CAAUlB,GAAV,CAAc,gBAAd,CAAX,CAAR,CAAoD,MAAM,EAAE,CAACd,EAAC,CAACwB,cAAF,CAAiB,UAAjB,CAAD,EAA+B,WAAW,MAAOxB,CAAAA,EAAC,CAACoC,QAArD,IAAiEC,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCtC,EAAC,CAACoC,QAAxG,CAAkH,OAAMrC,CAAN,CAAQ,CAAC,MAAM,CAAC,CAAE,CAAC,CAAAgB,CAAC,CAAC,CAACA,CAAC,CAACA,CAAC,CAACwB,GAAF,CAAM,SAAAvC,CAAC,QAAE,IAAIwC,CAAAA,GAAJ,CAAQxC,CAAR,CAAUD,CAAC,CAAC0C,QAAZ,EAAsBC,QAAtB,EAAF,CAAP,CAAH,EAA+CC,MAA/C,CAAsD,SAAA5C,CAAC,QAAEgB,CAAAA,CAAC,CAAC6B,QAAF,CAAW,aAAX,CAAF,CAAvD,CAAF,CAAsFjB,IAAI,CAACkB,gBAAL,CAAsB,SAAtB,CAAgC,SAAA5C,CAAC,CAAE,CAACD,CAAC,GAAGqC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCD,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAArC,CAAD,CAAuErC,CAAC,CAAC6C,SAAF,CAAY/C,CAAC,CAACgD,MAAF,CAASC,IAAT,CAAc5C,CAAd,EAAiB6C,IAAjB,CAAsB,SAAAlD,CAAC,QAAEA,CAAAA,CAAC,CAACmD,MAAF,CAASnC,CAAT,CAAF,CAAvB,EAAsCkC,IAAtC,CAA2C,UAAI,CAACjD,CAAC,EAAEqC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAkCvB,CAAlC,CAAqC,CAAxF,EAA0FoC,KAA1F,CAAgG,SAAApD,CAAC,CAAE,CAAC,KAAMsC,CAAAA,OAAO,CAACe,KAAR,CAAcrD,CAAd,EAAiBA,CAAE,CAA7H,CAAZ,CAA4I,CAAvP,CAAtF,CAA+U4B,IAAI,CAACkB,gBAAL,CAAsB,UAAtB,CAAiC,SAAA5C,CAAC,CAAE,CAAC,GAAGD,CAAH,CAAK,MAAOqC,CAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCX,IAAI,CAAC0B,OAAL,CAAaC,KAAb,EAA1C,CAA+DrD,CAAC,CAAC6C,SAAF,CAAY/C,CAAC,CAACgD,MAAF,CAASQ,IAAT,GAAgBN,IAAhB,CAAqB,SAAAjD,CAAC,QAAEwD,CAAAA,OAAO,CAACC,GAAR,CAAYzD,CAAC,CAACuC,GAAF,CAAM,SAAAvC,CAAC,QAAE,KAAIA,CAAC,CAAC0D,OAAF,CAAUtD,CAAV,CAAJ,CAAiB,IAAjB,CAAsBL,CAAC,CAACgD,MAAF,CAASY,MAAT,CAAgB3D,CAAhB,CAAxB,CAAP,CAAZ,CAAF,CAAtB,CAAZ,CAAsG,CAA/M,CAA/U,CAAgiB2B,IAAI,CAACkB,gBAAL,CAAsB,SAAtB,CAAgC,SAAA9C,CAAC,CAAE,CAAC,GAAG6D,SAAS,CAACC,MAAb,CAAoB,CAAC,CAAC,SAAS9D,CAAT,CAAW,CAAC,GAAG,CAAC,GAAMC,CAAAA,GAAC,CAAC+B,IAAI,CAAChC,CAAC,CAAC+D,WAAF,CAAcpB,QAAd,GAAyBqB,KAAzB,CAA+B,EAA/B,EAAmCC,OAAnC,GAA6CC,IAA7C,CAAkD,EAAlD,CAAD,CAAZ,CAAoEhE,CAAC,CAACiE,OAAF,CAAUlE,GAAV,CAAY+B,IAAI,CAACG,IAAI,CAACiC,SAAL,CAAepE,CAAf,CAAD,CAAhB,CAAqC,OAAMA,CAAN,CAAQ,CAACsC,OAAO,CAACC,GAAR,CAAYvC,CAAZ,CAAe,CAAC,CAAlJ,CAAmJA,CAAC,CAACqE,IAArJ,CAA2J,QAAOrE,CAAC,CAACqE,IAAF,CAAOC,MAAd,EAAsB,IAAI,aAAJ,CAAkB1C,IAAI,CAAC2C,WAAL,GAAmB3C,IAAI,CAAC2C,WAAL,GAAmB3C,IAAI,CAAC0B,OAAL,CAAaC,KAAb,EAAtC,EAAxC,CAAqG,CAA1T,CAAhiB,CAA41B3B,IAAI,CAACkB,gBAAL,CAAsB,OAAtB,0FAA8B,kBAAM3C,CAAN,0HAAa,QAAQA,CAAC,CAACqE,OAAF,CAAUC,MAA/B,4DAA6CxE,CAAC,GAAGqC,OAAO,CAACC,GAAR,gCAA2CpC,CAAC,CAACqE,OAAF,CAAUC,MAArD,EAA+DnC,OAAO,CAACC,GAAR,CAAYvB,CAAZ,CAAlE,CAAD,CAAmF,SAASd,CAAT,CAAW,CAAC,GAAMC,CAAAA,CAAC,CAACD,CAAC,CAACsE,OAAV,CAAkBxD,CAAC,CAAC,GAAIyB,CAAAA,GAAJ,CAAQtC,CAAC,CAACuE,GAAV,CAApB,CAAmC,GAAG1D,CAAC,CAAC2D,MAAF,GAAWjC,QAAQ,CAACiC,MAApB,EAA4B3D,CAAC,CAAC4D,IAAF,CAAO/B,QAAP,CAAgB,aAAhB,CAA/B,CAA8D,MAAO,MAAK5C,CAAC,EAAEqC,OAAO,CAACC,GAAR,kCAA6CvB,CAAC,CAAC2D,MAA/C,CAAR,CAAP,CAAyE,GAAMjE,CAAAA,CAAC,CAACV,CAAC,CAACgD,MAAF,CAAS6B,KAAT,CAAe1E,CAAf,EAAkB+C,IAAlB,CAAuB,SAAAxC,CAAC,QAAEA,CAAAA,CAAC,EAAET,CAAC,EAAEqC,OAAO,CAACC,GAAR,mBAA8BvB,CAAC,CAAC4D,IAAhC,eAAH,CAAsDlE,CAAxD,EAA2DoE,KAAK,CAAC3E,CAAD,CAAL,CAAS+C,IAAT,CAAc,SAAAhD,CAAC,CAAE,CAAC,GAAG,CAACA,CAAD,EAAI,CAACA,CAAC,CAAC6E,EAAV,CAAa,MAAO9E,CAAAA,CAAC,EAAEqC,OAAO,CAACC,GAAR,cAAyBvB,CAAC,CAAC2B,QAAF,EAAzB,6BAAiEzC,CAAC,CAAC8E,MAAnE,KAA6E9E,CAAC,CAAC+E,IAA/E,CAAH,CAA0F/E,CAAjG,CAAmGD,CAAC,EAAEqC,OAAO,CAACC,GAAR,aAAwBvB,CAAC,CAAC4D,IAA1B,YAAH,CAA6C,GAAMlE,CAAAA,CAAC,CAACR,CAAC,CAACgF,KAAF,EAAR,CAAkB,MAAOlF,CAAAA,CAAC,CAACgD,MAAF,CAASC,IAAT,CAAc5C,CAAd,EAAiB6C,IAAjB,CAAsB,SAAAlD,CAAC,QAAEA,CAAAA,CAAC,CAACmF,GAAF,CAAMhF,CAAN,CAAQO,CAAR,CAAF,CAAvB,EAAqCwC,IAArC,CAA0C,UAAI,CAACjD,CAAC,EAAEqC,OAAO,CAACC,GAAR,sBAAiCvB,CAAC,CAAC4D,IAAnC,CAA2C,CAA7F,EAA+F1E,CAAE,CAAzS,EAA2SkD,KAA3S,CAAiT,iBAAI,aAAalD,CAAC,CAACsE,OAAF,CAAUY,IAAvB,CAA4BpF,CAAC,CAACgD,MAAF,CAAS6B,KAAT,CAAe,IAAf,CAA5B,CAAiD,IAArD,CAAjT,CAA9D,CAAxB,CAAR,CAA2c,MAAO3E,CAAAA,CAAC,CAACmF,WAAF,CAAc3E,CAAd,CAAiB,CAAzpB,CAA0pBP,CAA1pB,CAAhI,UAA6xB,SAASA,CAAC,CAACqE,OAAF,CAAUC,MAAnB,GAA4BnC,OAAO,CAACC,GAAR,CAAYL,CAAC,CAAC/B,CAAC,CAACqE,OAAH,CAAb,EAA0B,CAAC,CAAD,GAAKX,SAAS,CAACC,MAAf,EAAuB,gBAAgB3D,CAAC,CAACqE,OAAF,CAAUvC,OAAV,CAAkBlB,GAAlB,CAAsB,aAAtB,CAAvC,EAA6E,SAASZ,CAAC,CAACqE,OAAF,CAAUvC,OAAV,CAAkBlB,GAAlB,CAAsB,aAAtB,CAAtF,EAA4HmB,CAAC,CAAC/B,CAAC,CAACqE,OAAH,CAA7H,EAA0IlC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCpC,CAAC,CAACkF,WAAF,CAAcP,KAAK,CAAC3E,CAAC,CAACqE,OAAH,CAAL,CAAiBpB,KAAjB,0FAAuB,kBAAMpD,CAAN,kIAAUsC,OAAO,CAACC,GAAR,CAAYpC,CAAC,CAACqE,OAAd,CAAV,cAAiC,gBAAgBrE,CAAC,CAACqE,OAAF,CAAUvC,OAAV,CAAkBlB,GAAlB,CAAsB,aAAtB,CAAhB,EAAsD,SAASZ,CAAC,CAACqE,OAAF,CAAUvC,OAAV,CAAkBlB,GAAlB,CAAsB,aAAtB,CAA/D,EAAqGmB,CAAC,CAAC/B,CAAC,CAACqE,OAAH,CAAvI,iEAA0J,8FAAexE,CAAf,4IAA4BC,GAA5B,CAA8BD,CAAC,CAACiC,OAAF,CAAUlB,GAAV,CAAc,aAAd,CAA9B,CAA2DZ,EAA3D,CAA6D6B,IAAI,CAAC/B,GAAC,CAAC0C,QAAF,GAAaqB,KAAb,CAAmB,EAAnB,EAAuBC,OAAvB,GAAiCC,IAAjC,CAAsC,EAAtC,CAAD,CAAjE,aAA8G,SAASlE,CAAT,CAAW,CAAC,GAAG,CAAC4B,IAAI,CAAC0B,OAAL,CAAagC,QAAb,GAAwBpC,IAAxB,CAA6B,SAAAjD,CAAC,QAAEA,CAAAA,CAAC,CAACuC,GAAF,CAAM,SAAAvC,CAAC,QAAEA,CAAAA,CAAC,CAACsF,WAAF,CAAcvF,CAAd,CAAF,CAAP,CAAF,CAA9B,CAA4D,OAAMA,CAAN,CAAQ,CAACsC,OAAO,CAACC,GAAR,CAAYvC,CAAZ,CAAe,CAAC,CAAnN,uBAA0NE,CAAAA,CAAC,CAACsF,OAAF,CAAUrF,EAAV,CAA1N,+IAAiPmC,OAAO,CAACC,GAAR,cAAjP,kIAAkQpC,CAAC,CAACqE,OAApQ,CAA1J,+BAAqbtE,CAAAA,CAAC,CAACsF,OAAF,CAAUlF,CAAC,CAACH,CAAC,CAACqE,OAAH,CAAX,CAArb,QAA6avE,CAA7a,qBAAgdqC,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+B,OAAOtC,CAAtf,4DAA+f,SAASD,CAAT,CAAW,CAAC,MAAOyD,CAAAA,OAAO,CAACgC,OAAR,CAAgB,GAAIC,CAAAA,QAAJ,CAAa1F,CAAC,CAAC2F,IAAf,CAAoB3F,CAApB,CAAhB,CAAwC,CAA3D,CAA4DC,CAA5D,CAA/f,UAAmkBD,EAAnkB,CAAqkB,CAACgF,MAAM,CAAC,sBAAR,CAA+BY,SAAS,CAAC,yBAAzC,CAAmEC,aAAa,CAAC,+BAAjF,CAAiHC,OAAO,CAAC,+BAAzH,CAArkB,CAA+tB7F,GAA/tB,CAAiuB,GAAI8F,CAAAA,IAAJ,CAAS,CAAC5D,IAAI,CAACiC,SAAL,CAAepE,EAAf,CAAiB,IAAjB,CAAsB,CAAtB,CAAD,CAAT,CAAoC,CAACiF,IAAI,CAAC,kBAAN,CAApC,CAAjuB,kCAAuyB,GAAIS,CAAAA,QAAJ,CAAazF,GAAb,CAAe,CAAC+E,MAAM,CAAC,GAAR,CAAYgB,UAAU,CAAC,+BAAvB,CAAf,CAAvyB,0DAAvB,+DAAd,CAA1K,EAAmkC7F,CAAC,CAACkF,WAAF,CAAcP,KAAK,CAAC3E,CAAC,CAACqE,OAAF,CAAUU,KAAV,EAAD,CAAL,CAAyBhC,IAAzB,0FAA8B,kBAAMlD,CAAN,uJAAUkC,CAAC,CAAC/B,CAAC,CAACqE,OAAH,CAAD,EAAc,8FAAexE,CAAf,CAAiBC,CAAjB,kIAAuB,gBAAgBD,CAAC,CAACiC,OAAF,CAAUlB,GAAV,CAAc,aAAd,CAAhB,EAA8C,SAASf,CAAC,CAACiC,OAAF,CAAUlB,GAAV,CAAc,aAAd,CAA9E,iDAA0H,UAASf,CAAT,CAAW,CAAC,GAAIC,CAAAA,CAAC,CAAC,CAACgC,OAAO,CAACvB,CAAC,CAACV,CAAC,CAACiC,OAAH,CAAV,CAAsB+C,MAAM,CAAChF,CAAC,CAACgF,MAA/B,CAAsCgB,UAAU,CAAChG,CAAC,CAACgG,UAAnD,CAAN,CAAqE,MAAOhG,CAAAA,CAAC,CAACkF,KAAF,GAAUe,IAAV,GAAiB/C,IAAjB,CAAsB,SAASlD,CAAT,CAAW,CAAC,MAAOC,CAAAA,CAAC,CAAC0F,IAAF,CAAO3F,CAAP,CAASyD,OAAO,CAACgC,OAAR,CAAgBxF,CAAhB,CAAmB,CAArE,CAAuE,CAA/J,CAAgKA,CAAhK,CAA1H,QAAkHE,GAAlH,gBAA6RD,CAAC,CAACiE,OAAF,CAAU7D,CAAC,CAACN,CAAD,CAAX,CAAeG,GAAf,EAA7R,0HAAiTA,CAAC,CAACqE,OAAnT,CAA2TxE,CAA3T,CAAd,CAA4UA,CAAtV,0DAA9B,gEAAwXoD,KAAxX,CAA8X,SAAApD,CAAC,CAAE,CAACsC,OAAO,CAACC,GAAR,CAAYvC,CAAZ,CAAe,CAAjZ,CAAd,CAAznC,EAA7xB,uDAA9B,8DAAy1E,CAA7yH,EAA+yHQ,IAA/yH,CAAozH,IAApzH,CAAyzHN,CAAC,CAAC,CAAD,CAA1zH,CAA+zH,CAAh1H,CAAi1H,SAASF,CAAT,CAAWC,CAAX,CAAa,CAAC,GAAIC,CAAAA,CAAJ,CAAMA,CAAC,CAAC,UAAU,CAAC,MAAO,KAAK,CAAvB,EAAF,CAA4B,GAAG,CAACA,CAAC,CAACA,CAAC,EAAE,GAAIgG,CAAAA,QAAJ,CAAa,aAAb,GAA8B,OAAMlG,CAAN,CAAQ,CAAC,UAAU,MAAOmG,CAAAA,MAAjB,GAA0BjG,CAAC,CAACiG,MAA5B,CAAoC,CAAAnG,CAAC,CAACI,OAAF,CAAUF,CAAE,CAAj+H,CAA94B,CAAD,CACR","sourcesContent":["var serviceWorkerOption = {\n  \"assets\": [\n    \"/apiGateway.js\",\n    \"/index.html\"\n  ]\n};\n        \n        !function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){(function(e){importScripts(\"https://cdn.jsdelivr.net/npm/localforage@1.7.3/dist/localforage.min.js\",\"https://cdnjs.cloudflare.com/ajax/libs/Base64/1.0.2/base64.min.js\");const t=!0,n=self.localforage,{assets:o}=e.serviceWorkerOption,s=\"static\";let r=[...o,\"./\"];function c(e){var t={};for(const n of e.entries())t[n[0]]=n[1];return t}function i(e){return btoa?btoa(e.headers.get(\"servicename\")):e.headers.get(\"servicename\")}function a(e){try{const t=JSON.parse(e.headers.get(\"custom_headers\"));return!(!t.hasOwnProperty(\"useCache\")||\"boolean\"!=typeof t.useCache)&&(console.log(\"inside cusotm headers\"),t.useCache)}catch(e){return!1}}r=(r=r.map(t=>new URL(t,e.location).toString())).filter(e=>r.includes(\"sockjs-node\")),self.addEventListener(\"install\",n=>{t&&(console.log(\"[SW] Install event\"),console.log(\"Claiming control\")),n.waitUntil(e.caches.open(s).then(e=>e.addAll(r)).then(()=>{t&&console.log(\"Cached assets: main\",r)}).catch(e=>{throw console.error(e),e}))}),self.addEventListener(\"activate\",n=>{if(t)return console.log(\"[SW] Activate event\"),self.clients.claim();n.waitUntil(e.caches.keys().then(t=>Promise.all(t.map(t=>0===t.indexOf(s)?null:e.caches.delete(t)))))}),self.addEventListener(\"message\",e=>{if(navigator.onLine){!function(e){try{const t=btoa(e.serviceName.toString().split(\"\").reverse().join(\"\"));n.setItem(t,btoa(JSON.stringify(e)))}catch(e){console.log(e)}}(e.data)}switch(e.data.action){case\"skipWaiting\":self.skipWaiting&&(self.skipWaiting(),self.clients.claim())}}),self.addEventListener(\"fetch\",async o=>{if(\"GET\"===o.request.method)return t&&(console.log(`[SW] Ignore non GET request ${o.request.method}`),console.log(r)),function(n){const o=n.request,r=new URL(o.url);if(r.origin!==location.origin||r.href.includes(\"sockjs-node\"))return void(t&&console.log(`[SW] Ignore difference origin ${r.origin}`));const c=e.caches.match(o).then(c=>c?(t&&console.log(`[SW] fetch URL ${r.href} from cache`),c):fetch(o).then(n=>{if(!n||!n.ok)return t&&console.log(`[SW] URL [${r.toString()}] wrong responseNetwork: ${n.status} ${n.type}`),n;t&&console.log(`[SW] URL ${r.href} fetched`);const c=n.clone();return e.caches.open(s).then(e=>e.put(o,c)).then(()=>{t&&console.log(`[SW] Cache asset: ${r.href}`)}),n}).catch(()=>\"navigate\"===n.request.mode?e.caches.match(\"./\"):null));return n.respondWith(c)}(o);\"POST\"===o.request.method&&(console.log(a(o.request)),!1===navigator.onLine&&\"AUTH_VAHANA\"!==o.request.headers.get(\"servicename\")&&\"AUTH\"!==o.request.headers.get(\"servicename\")&&a(o.request)?(console.log(\"inside naviagtor\"),o.respondWith(fetch(o.request).catch(async e=>{console.log(o.request),\"AUTH_VAHANA\"!==o.request.headers.get(\"servicename\")&&\"AUTH\"!==o.request.headers.get(\"servicename\")&&a(o.request)&&await async function(e){try{const t=e.headers.get(\"servicename\"),o=btoa(t.toString().split(\"\").reverse().join(\"\"));!function(e){try{self.clients.matchAll().then(t=>t.map(t=>t.postMessage(e)))}catch(e){console.log(e)}}(await n.getItem(o))}catch(e){console.log(e)}}(o.request);const t=await n.getItem(i(o.request));if(console.log(\"user is offline\"),null!==t)return function(e){return Promise.resolve(new Response(e.body,e))}(t);{let e={status:\"Service Worker SWOO1\",errorHint:\"API has not been cached\",errorResponse:\"No records found in offlineDB\",message:\"No records found for this API\"},t=new Blob([JSON.stringify(e,null,2)],{type:\"application/json\"});return new Response(t,{status:400,statusText:\"No records found in offlineDB\"})}}))):o.respondWith(fetch(o.request.clone()).then(async e=>(a(o.request)&&async function(e,t){if(\"AUTH_VAHANA\"!==e.headers.get(\"servicename\")&&\"AUTH\"!==e.headers.get(\"servicename\")){const o=await function(e){var t={headers:c(e.headers),status:e.status,statusText:e.statusText};return e.clone().text().then(function(e){return t.body=e,Promise.resolve(t)})}(t);n.setItem(i(e),o)}}(o.request,e),e)).catch(e=>{console.log(e)})))})}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n}]);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N3LmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJpbXBvcnRTY3JpcHRzIiwiREVCVUciLCJsb2NhbGZvcmFnZSIsInNlbGYiLCJhc3NldHMiLCJnbG9iYWwiLCJzZXJ2aWNlV29ya2VyT3B0aW9uIiwiQ0FDSEVfTkFNRSIsImFzc2V0c1RvQ2FjaGUiLCJzZXJpYWxpemVIZWFkZXJzIiwiaGVhZGVycyIsInNlcmlhbGl6ZWQiLCJlbnRyeSIsImVudHJpZXMiLCJnZXRLZXlOYW1lIiwicmVxdWVzdCIsImJ0b2EiLCJpc0NhY2hlYWJsZSIsImN1c3RvbUhlYWRlcnMiLCJKU09OIiwicGFyc2UiLCJ1c2VDYWNoZSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIm1hcCIsInBhdGgiLCJVUkwiLCJsb2NhdGlvbiIsInRvU3RyaW5nIiwiZmlsdGVyIiwiaW5jbHVkZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ3YWl0VW50aWwiLCJjYWNoZXMiLCJvcGVuIiwidGhlbiIsImNhY2hlIiwiYWRkQWxsIiwiY2F0Y2giLCJjbGllbnRzIiwiY2xhaW0iLCJrZXlzIiwiY2FjaGVOYW1lcyIsIlByb21pc2UiLCJhbGwiLCJjYWNoZU5hbWUiLCJpbmRleE9mIiwiZGVsZXRlIiwibmF2aWdhdG9yIiwib25MaW5lIiwiZGF0YSIsInNlcnZpY2VOYW1lIiwic3BsaXQiLCJyZXZlcnNlIiwiam9pbiIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzYXZlVHJhbnNhY3Rpb25LZXkiLCJhY3Rpb24iLCJza2lwV2FpdGluZyIsImFzeW5jIiwibWV0aG9kIiwicmVxdWVzdFVybCIsInVybCIsIm9yaWdpbiIsImhyZWYiLCJyZXNvdXJjZSIsIm1hdGNoIiwicmVzcG9uc2UiLCJmZXRjaCIsInJlc3BvbnNlTmV0d29yayIsIm9rIiwic3RhdHVzIiwidHlwZSIsInJlc3BvbnNlQ2FjaGUiLCJjbG9uZSIsInB1dCIsInJlc3BvbmRXaXRoIiwiaGFuZGxlR0VUUmVxdWVzdCIsIm1hdGNoQWxsIiwiY2xpZW50IiwicG9zdE1lc3NhZ2UiLCJlbWl0a2V5VG9DbGllbnQiLCJnZXRJdGVtIiwiZ2V0VHJhc25hc2N0b25LZXkiLCJyZXMiLCJyZXNvbHZlIiwiUmVzcG9uc2UiLCJib2R5IiwiZGVzZXJpYWxpemVSZXNwb25zZSIsImVycm9ySGludCIsImVycm9yUmVzcG9uc2UiLCJtZXNzYWdlIiwiYmxvYiIsIkJsb2IiLCJzdGF0dXNUZXh0Iiwic2VyaWFsaXplZFJlc3AiLCJ0ZXh0Iiwic2VyaWFsaXplUmVzcG9uc2UiLCJjYWNoZVB1dCIsImVyciIsImciLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFB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RUFBYSxDQUNmRCxRQUFTRCxFQUFpQjZELEVBQVM1RCxTQUNuQ2dFLE9BQVFKLEVBQVNJLE9BQ2pCdUIsV0FBWTNCLEVBQVMyQixZQUd2QixPQUFPM0IsRUFDSk8sUUFDQXNCLE9BQ0E5RCxLQUFLLFNBQVNxRCxHQUViLE9BREEvRSxFQUFXK0UsS0FBT0EsRUFDWDdDLFFBQVEyQyxRQUFRN0UsS0EyQ0l5RixDQUFrQjlCLEdBQ3hDcEUsRUFBWXVELFFBQVEzQyxFQUFXQyxHQUFVbUYsSUFuTHRDRyxDQUFTcEUsRUFBTWxCLFFBQVN1RCxHQUVuQkEsSUFFUjlCLE1BQU04RCxJQUNMaEYsUUFBUUMsSUFBSStFLFcsK0JDcEt4QixJQUFJQyxFQUdKQSxFQUFJLFdBQ0gsT0FBT0MsS0FESixHQUlKLElBRUNELEVBQUlBLEdBQUssSUFBSUUsU0FBUyxjQUFiLEdBQ1IsTUFBT0MsR0FFYyxpQkFBWEMsU0FBcUJKLEVBQUlJLFFBT3JDNUksRUFBT0QsUUFBVXlJIiwiZmlsZSI6InN3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLy8gQGZsb3cgd2Vha1xuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuaW1wb3J0U2NyaXB0cyhcbiAgXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xvY2FsZm9yYWdlQDEuNy4zL2Rpc3QvbG9jYWxmb3JhZ2UubWluLmpzXCIsXG4gIFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvQmFzZTY0LzEuMC4yL2Jhc2U2NC5taW4uanNcIlxuKTtcbmNvbnN0IERFQlVHID0gdHJ1ZTtcbmNvbnN0IGxvY2FsZm9yYWdlID0gc2VsZi5sb2NhbGZvcmFnZTtcbi8vIFdoZW4gdGhlIHVzZXIgbmF2aWdhdGVzIHRvIHlvdXIgc2l0ZSxcbi8vIHRoZSBicm93c2VyIHRyaWVzIHRvIHJlZG93bmxvYWQgdGhlIHNjcmlwdCBmaWxlIHRoYXQgZGVmaW5lZCB0aGUgc2VydmljZVxuLy8gd29ya2VyIGluIHRoZSBiYWNrZ3JvdW5kLlxuLy8gSWYgdGhlcmUgaXMgZXZlbiBhIGJ5dGUncyBkaWZmZXJlbmNlIGluIHRoZSBzZXJ2aWNlIHdvcmtlciBmaWxlIGNvbXBhcmVkXG4vLyB0byB3aGF0IGl0IGN1cnJlbnRseSBoYXMsIGl0IGNvbnNpZGVycyBpdCAnbmV3Jy5cbmNvbnN0IHsgYXNzZXRzIH0gPSBnbG9iYWwuc2VydmljZVdvcmtlck9wdGlvbjtcblxuY29uc3QgQ0FDSEVfTkFNRSA9IFwic3RhdGljXCI7IC8vbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xubGV0IGFzc2V0c1RvQ2FjaGUgPSBbLi4uYXNzZXRzLCBcIi4vXCJdO1xuXG5hc3NldHNUb0NhY2hlID0gYXNzZXRzVG9DYWNoZS5tYXAocGF0aCA9PiB7XG4gIHJldHVybiBuZXcgVVJMKHBhdGgsIGdsb2JhbC5sb2NhdGlvbikudG9TdHJpbmcoKTtcbn0pO1xuXG5hc3NldHNUb0NhY2hlID0gYXNzZXRzVG9DYWNoZS5maWx0ZXIoYXNzZXRzID0+IHtcbiAgcmV0dXJuIGFzc2V0c1RvQ2FjaGUuaW5jbHVkZXMoXCJzb2NranMtbm9kZVwiKTtcbn0pO1xuXG4vLyBXaGVuIHRoZSBzZXJ2aWNlIHdvcmtlciBpcyBmaXJzdCBhZGRlZCB0byBhIGNvbXB1dGVyLlxuc2VsZi5hZGRFdmVudExpc3RlbmVyKFwiaW5zdGFsbFwiLCBldmVudCA9PiB7XG4gIC8vIFBlcmZvcm0gaW5zdGFsbCBzdGVwcy5cbiAgaWYgKERFQlVHKSB7XG4gICAgY29uc29sZS5sb2coXCJbU1ddIEluc3RhbGwgZXZlbnRcIik7XG4gICAgY29uc29sZS5sb2coXCJDbGFpbWluZyBjb250cm9sXCIpO1xuICB9XG5cbiAgLy8gQWRkIGNvcmUgd2Vic2l0ZSBmaWxlcyB0byBjYWNoZSBkdXJpbmcgc2VydmljZXdvcmtlciBpbnN0YWxsYXRpb24uXG4gIGV2ZW50LndhaXRVbnRpbChcbiAgICBnbG9iYWwuY2FjaGVzXG4gICAgICAub3BlbihDQUNIRV9OQU1FKVxuICAgICAgLnRoZW4oY2FjaGUgPT4ge1xuICAgICAgICByZXR1cm4gY2FjaGUuYWRkQWxsKGFzc2V0c1RvQ2FjaGUpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJDYWNoZWQgYXNzZXRzOiBtYWluXCIsIGFzc2V0c1RvQ2FjaGUpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfSlcbiAgKTtcbn0pO1xuXG4vLyBBZnRlciB0aGUgaW5zdGFsbCBldmVudC5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImFjdGl2YXRlXCIsIGV2ZW50ID0+IHtcbiAgaWYgKERFQlVHKSB7XG4gICAgY29uc29sZS5sb2coXCJbU1ddIEFjdGl2YXRlIGV2ZW50XCIpO1xuICAgIHJldHVybiBzZWxmLmNsaWVudHMuY2xhaW0oKTtcbiAgfVxuXG4gIC8vIENsZWFuIHRoZSBjYWNoZXNcbiAgZXZlbnQud2FpdFVudGlsKFxuICAgIGdsb2JhbC5jYWNoZXMua2V5cygpLnRoZW4oY2FjaGVOYW1lcyA9PiB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgIGNhY2hlTmFtZXMubWFwKGNhY2hlTmFtZSA9PiB7XG4gICAgICAgICAgLy8gRGVsZXRlIHRoZSBjYWNoZXMgdGhhdCBhcmUgbm90IHRoZSBjdXJyZW50IG9uZS5cbiAgICAgICAgICBpZiAoY2FjaGVOYW1lLmluZGV4T2YoQ0FDSEVfTkFNRSkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBnbG9iYWwuY2FjaGVzLmRlbGV0ZShjYWNoZU5hbWUpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KVxuICApO1xufSk7XG5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZXZlbnQgPT4ge1xuICBpZiAobmF2aWdhdG9yLm9uTGluZSkge1xuICAgIGxldCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgICBzYXZlVHJhbnNhY3Rpb25LZXkoZGF0YSk7XG4gIH1cbiAgLy8gc2F2ZSB0cmFuc2FjdGlvbiBrZXkgdG8gZGF0YWJhc2VcbiAgLy8gZXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2UoXCJTVyBTYXlzICdIZWxsbyBiYWNrISdcIik7XG4gIHN3aXRjaCAoZXZlbnQuZGF0YS5hY3Rpb24pIHtcbiAgICBjYXNlIFwic2tpcFdhaXRpbmdcIjpcbiAgICAgIGlmIChzZWxmLnNraXBXYWl0aW5nKSB7XG4gICAgICAgIHNlbGYuc2tpcFdhaXRpbmcoKTtcbiAgICAgICAgc2VsZi5jbGllbnRzLmNsYWltKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbn0pO1xuXG4vKiBBZGRpbmcgY3VzdG9tIG1ldGhvZCB0byBpbnRlcmNlcHQgcmVxdWVzdCBhbmQgY2FjaGUgaXQgb3Igbm90ICovXG4vLyBMaXN0ZW4gdG8gZmV0Y2ggcmVxdWVzdHNcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImZldGNoXCIsIGFzeW5jIGV2ZW50ID0+IHtcbiAgLy8gV2Ugd2lsbCBjYWNoZSBhbGwgUE9TVCByZXF1ZXN0cywgYnV0IGluIHRoZSByZWFsIHdvcmxkLCB5b3Ugd2lsbCBwcm9iYWJseSBmaWx0ZXIgZm9yXG4gIC8vIHNwZWNpZmljIFVSTHMgbGlrZSBpZiguLi4gfHwgZXZlbnQucmVxdWVzdC51cmwuaHJlZi5tYXRjaCguLi4pKVxuXG4gIGlmIChldmVudC5yZXF1ZXN0Lm1ldGhvZCA9PT0gXCJHRVRcIikge1xuICAgIGlmIChERUJVRykge1xuICAgICAgY29uc29sZS5sb2coYFtTV10gSWdub3JlIG5vbiBHRVQgcmVxdWVzdCAke2V2ZW50LnJlcXVlc3QubWV0aG9kfWApO1xuICAgICAgY29uc29sZS5sb2coYXNzZXRzVG9DYWNoZSk7XG4gICAgfVxuICAgIHJldHVybiBoYW5kbGVHRVRSZXF1ZXN0KGV2ZW50KTtcbiAgfSBlbHNlIGlmIChldmVudC5yZXF1ZXN0Lm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICAvLyBJbml0IHRoZSBjYWNoZS4gV2UgdXNlIERleGllIGhlcmUgdG8gc2ltcGxpZnkgdGhlIGNvZGUuIFlvdSBjYW4gdXNlIGFueSBvdGhlclxuICAgIC8vIHdheSB0byBhY2Nlc3MgSW5kZXhlZERCIG9mIGNvdXJzZS5cbiAgICBjb25zb2xlLmxvZyhpc0NhY2hlYWJsZShldmVudC5yZXF1ZXN0KSk7XG4gICAgaWYgKFxuICAgICAgbmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UgJiZcbiAgICAgIGV2ZW50LnJlcXVlc3QuaGVhZGVycy5nZXQoXCJzZXJ2aWNlbmFtZVwiKSAhPT0gXCJBVVRIX1ZBSEFOQVwiICYmXG4gICAgICBldmVudC5yZXF1ZXN0LmhlYWRlcnMuZ2V0KFwic2VydmljZW5hbWVcIikgIT09IFwiQVVUSFwiICYmXG4gICAgICBpc0NhY2hlYWJsZShldmVudC5yZXF1ZXN0KVxuICAgICkge1xuICAgICAgY29uc29sZS5sb2coXCJpbnNpZGUgbmF2aWFndG9yXCIpO1xuICAgICAgZXZlbnQucmVzcG9uZFdpdGgoXG4gICAgICAgIGZldGNoKGV2ZW50LnJlcXVlc3QpLmNhdGNoKGFzeW5jIGVycm9yID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhldmVudC5yZXF1ZXN0KTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5yZXF1ZXN0LmhlYWRlcnMuZ2V0KFwic2VydmljZW5hbWVcIikgIT09IFwiQVVUSF9WQUhBTkFcIiAmJlxuICAgICAgICAgICAgZXZlbnQucmVxdWVzdC5oZWFkZXJzLmdldChcInNlcnZpY2VuYW1lXCIpICE9PSBcIkFVVEhcIiAmJlxuICAgICAgICAgICAgaXNDYWNoZWFibGUoZXZlbnQucmVxdWVzdClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGF3YWl0IGdldFRyYXNuYXNjdG9uS2V5KGV2ZW50LnJlcXVlc3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBsb2NhbGZvcmFnZS5nZXRJdGVtKGdldEtleU5hbWUoZXZlbnQucmVxdWVzdCkpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBpcyBvZmZsaW5lXCIpO1xuICAgICAgICAgIGlmIChyZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZVJlc3BvbnNlKHJlcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgICBzdGF0dXM6IFwiU2VydmljZSBXb3JrZXIgU1dPTzFcIixcbiAgICAgICAgICAgICAgZXJyb3JIaW50OiBcIkFQSSBoYXMgbm90IGJlZW4gY2FjaGVkXCIsXG4gICAgICAgICAgICAgIGVycm9yUmVzcG9uc2U6IFwiTm8gcmVjb3JkcyBmb3VuZCBpbiBvZmZsaW5lREJcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJObyByZWNvcmRzIGZvdW5kIGZvciB0aGlzIEFQSVwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMildLCB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBpbml0ID0ge1xuICAgICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICAgICAgc3RhdHVzVGV4dDogXCJObyByZWNvcmRzIGZvdW5kIGluIG9mZmxpbmVEQlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShibG9iLCBpbml0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5yZXNwb25kV2l0aChcbiAgICAgICAgLy8gRmlyc3QgdHJ5IHRvIGZldGNoIHRoZSByZXF1ZXN0IGZyb20gdGhlIHNlcnZlclxuICAgICAgICBmZXRjaChldmVudC5yZXF1ZXN0LmNsb25lKCkpXG4gICAgICAgICAgLnRoZW4oYXN5bmMgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgLy8gSWYgaXQgd29ya3MsIHB1dCB0aGUgcmVzcG9uc2UgaW50byBJbmRleGVkREJcblxuICAgICAgICAgICAgaWYgKGlzQ2FjaGVhYmxlKGV2ZW50LnJlcXVlc3QpKSB7XG4gICAgICAgICAgICAgIGNhY2hlUHV0KGV2ZW50LnJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVHRVRSZXF1ZXN0KGV2ZW50KSB7XG4gIGNvbnN0IHJlcXVlc3QgPSBldmVudC5yZXF1ZXN0O1xuICAvLyBJZ25vcmUgbm90IEdFVCByZXF1ZXN0LlxuXG4gIGNvbnN0IHJlcXVlc3RVcmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcblxuICAvLyBJZ25vcmUgZGlmZmVyZW5jZSBvcmlnaW4uXG4gIGlmIChcbiAgICByZXF1ZXN0VXJsLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luIHx8XG4gICAgcmVxdWVzdFVybC5ocmVmLmluY2x1ZGVzKFwic29ja2pzLW5vZGVcIilcbiAgKSB7XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1NXXSBJZ25vcmUgZGlmZmVyZW5jZSBvcmlnaW4gJHtyZXF1ZXN0VXJsLm9yaWdpbn1gKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcmVzb3VyY2UgPSBnbG9iYWwuY2FjaGVzLm1hdGNoKHJlcXVlc3QpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbU1ddIGZldGNoIFVSTCAke3JlcXVlc3RVcmwuaHJlZn0gZnJvbSBjYWNoZWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgLy8gTG9hZCBhbmQgY2FjaGUga25vd24gYXNzZXRzLlxuICAgIHJldHVybiBmZXRjaChyZXF1ZXN0KVxuICAgICAgLnRoZW4ocmVzcG9uc2VOZXR3b3JrID0+IHtcbiAgICAgICAgaWYgKCFyZXNwb25zZU5ldHdvcmsgfHwgIXJlc3BvbnNlTmV0d29yay5vaykge1xuICAgICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgIGBbU1ddIFVSTCBbJHtyZXF1ZXN0VXJsLnRvU3RyaW5nKCl9XSB3cm9uZyByZXNwb25zZU5ldHdvcms6ICR7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VOZXR3b3JrLnN0YXR1c1xuICAgICAgICAgICAgICB9ICR7cmVzcG9uc2VOZXR3b3JrLnR5cGV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VOZXR3b3JrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtTV10gVVJMICR7cmVxdWVzdFVybC5ocmVmfSBmZXRjaGVkYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZUNhY2hlID0gcmVzcG9uc2VOZXR3b3JrLmNsb25lKCk7XG5cbiAgICAgICAgZ2xvYmFsLmNhY2hlc1xuICAgICAgICAgIC5vcGVuKENBQ0hFX05BTUUpXG4gICAgICAgICAgLnRoZW4oY2FjaGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnB1dChyZXF1ZXN0LCByZXNwb25zZUNhY2hlKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1NXXSBDYWNoZSBhc3NldDogJHtyZXF1ZXN0VXJsLmhyZWZ9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlTmV0d29yaztcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvLyBVc2VyIGlzIGxhbmRpbmcgb24gb3VyIHBhZ2UuXG4gICAgICAgIGlmIChldmVudC5yZXF1ZXN0Lm1vZGUgPT09IFwibmF2aWdhdGVcIikge1xuICAgICAgICAgIHJldHVybiBnbG9iYWwuY2FjaGVzLm1hdGNoKFwiLi9cIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGV2ZW50LnJlc3BvbmRXaXRoKHJlc291cmNlKTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIGEgUmVxdWVzdCBpbnRvIGEgcGxhaW4gSlMgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSByZXF1ZXN0XG4gKiBAcmV0dXJucyBQcm9taXNlXG4gKi9cblxuZnVuY3Rpb24gc2VyaWFsaXplUmVxdWVzdChyZXF1ZXN0KSB7XG4gIHZhciBzZXJpYWxpemVkID0ge1xuICAgIHVybDogcmVxdWVzdC51cmwsXG4gICAgaGVhZGVyczogc2VyaWFsaXplSGVhZGVycyhyZXF1ZXN0LmhlYWRlcnMpLFxuICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG4gICAgbW9kZTogcmVxdWVzdC5tb2RlLFxuICAgIGNyZWRlbnRpYWxzOiByZXF1ZXN0LmNyZWRlbnRpYWxzLFxuICAgIGNhY2hlOiByZXF1ZXN0LmNhY2hlLFxuICAgIHJlZGlyZWN0OiByZXF1ZXN0LnJlZGlyZWN0LFxuICAgIHJlZmVycmVyOiByZXF1ZXN0LnJlZmVycmVyXG4gIH07XG5cbiAgLy8gT25seSBpZiBtZXRob2QgaXMgbm90IGBHRVRgIG9yIGBIRUFEYCBpcyB0aGUgcmVxdWVzdCBhbGxvd2VkIHRvIGhhdmUgYm9keS5cbiAgaWYgKHJlcXVlc3QubWV0aG9kICE9PSBcIkdFVFwiICYmIHJlcXVlc3QubWV0aG9kICE9PSBcIkhFQURcIikge1xuICAgIHJldHVybiByZXF1ZXN0XG4gICAgICAuY2xvbmUoKVxuICAgICAgLnRleHQoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oYm9keSkge1xuICAgICAgICBzZXJpYWxpemVkLmJvZHkgPSBib2R5O1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNlcmlhbGl6ZWQpO1xuICAgICAgfSk7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzZXJpYWxpemVkKTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIGEgUmVzcG9uc2UgaW50byBhIHBsYWluIEpTIG9iamVjdFxuICpcbiAqIEBwYXJhbSByZXNwb25zZVxuICogQHJldHVybnMgUHJvbWlzZVxuICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gIHZhciBzZXJpYWxpemVkID0ge1xuICAgIGhlYWRlcnM6IHNlcmlhbGl6ZUhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyksXG4gICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dFxuICB9O1xuXG4gIHJldHVybiByZXNwb25zZVxuICAgIC5jbG9uZSgpXG4gICAgLnRleHQoKVxuICAgIC50aGVuKGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHNlcmlhbGl6ZWQuYm9keSA9IGJvZHk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNlcmlhbGl6ZWQpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFNlcmlhbGl6ZXMgaGVhZGVycyBpbnRvIGEgcGxhaW4gSlMgb2JqZWN0XG4gKlxuICogQHBhcmFtIGhlYWRlcnNcbiAqIEByZXR1cm5zIG9iamVjdFxuICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgc2VyaWFsaXplZCA9IHt9O1xuICAvLyBgZm9yKC4uLiBvZiAuLi4pYCBpcyBFUzYgbm90YXRpb24gYnV0IGN1cnJlbnQgYnJvd3NlcnMgc3VwcG9ydGluZyBTVywgc3VwcG9ydCB0aGlzXG4gIC8vIG5vdGF0aW9uIGFzIHdlbGwgYW5kIHRoaXMgaXMgdGhlIG9ubHkgd2F5IG9mIHJldHJpZXZpbmcgYWxsIHRoZSBoZWFkZXJzLlxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGhlYWRlcnMuZW50cmllcygpKSB7XG4gICAgc2VyaWFsaXplZFtlbnRyeVswXV0gPSBlbnRyeVsxXTtcbiAgfVxuICByZXR1cm4gc2VyaWFsaXplZDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUmVzcG9uc2UgZnJvbSBpdCdzIHNlcmlhbGl6ZWQgdmVyc2lvblxuICpcbiAqIEBwYXJhbSBkYXRhXG4gKiBAcmV0dXJucyBQcm9taXNlXG4gKi9cblxuZnVuY3Rpb24gZGVzZXJpYWxpemVSZXNwb25zZShkYXRhKSB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFJlc3BvbnNlKGRhdGEuYm9keSwgZGF0YSkpO1xufVxuXG4vKipcbiAqIFNhdmVzIHRoZSByZXNwb25zZSBmb3IgdGhlIGdpdmVuIHJlcXVlc3QgZXZlbnR1YWxseSBvdmVycmlkaW5nIHRoZSBwcmV2aW91cyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIGRhdGFcbiAqIEByZXR1cm5zIFByb21pc2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2FjaGVQdXQocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgaWYgKFxuICAgIHJlcXVlc3QuaGVhZGVycy5nZXQoXCJzZXJ2aWNlbmFtZVwiKSAhPT0gXCJBVVRIX1ZBSEFOQVwiICYmXG4gICAgcmVxdWVzdC5oZWFkZXJzLmdldChcInNlcnZpY2VuYW1lXCIpICE9PSBcIkFVVEhcIlxuICApIHtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVzcCA9IGF3YWl0IHNlcmlhbGl6ZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gbG9jYWxmb3JhZ2Uuc2V0SXRlbShnZXRLZXlOYW1lKHJlcXVlc3QpLCBzZXJpYWxpemVkUmVzcCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0S2V5TmFtZShyZXF1ZXN0KSB7XG4gIC8qIENvbnZlcnQgc2VydmljZSBOYW1lIGludG8gYmFzZTY0IGNvZGUgZm9ybWF0ICovXG4gIGlmIChidG9hKSB7XG4gICAgcmV0dXJuIGJ0b2EocmVxdWVzdC5oZWFkZXJzLmdldChcInNlcnZpY2VuYW1lXCIpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmVxdWVzdC5oZWFkZXJzLmdldChcInNlcnZpY2VuYW1lXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNhdmVUcmFuc2FjdGlvbktleShkYXRhKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qga2V5ID0gYnRvYShcbiAgICAgIGRhdGEuc2VydmljZU5hbWVcbiAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgLnNwbGl0KFwiXCIpXG4gICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgLmpvaW4oXCJcIilcbiAgICApO1xuICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oa2V5LCBidG9hKEpTT04uc3RyaW5naWZ5KGRhdGEpKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRyYXNuYXNjdG9uS2V5KHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXJ2aWNlTmFtZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJzZXJ2aWNlbmFtZVwiKTtcbiAgICBjb25zdCBrZXkgPSBidG9hKFxuICAgICAgc2VydmljZU5hbWVcbiAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgLnNwbGl0KFwiXCIpXG4gICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgLmpvaW4oXCJcIilcbiAgICApO1xuICAgIGxldCBkYXRhID0gYXdhaXQgbG9jYWxmb3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIGVtaXRrZXlUb0NsaWVudChkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdGtleVRvQ2xpZW50KGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBzZWxmLmNsaWVudHNcbiAgICAgIC5tYXRjaEFsbCgpXG4gICAgICAudGhlbihhbGwgPT4gYWxsLm1hcChjbGllbnQgPT4gY2xpZW50LnBvc3RNZXNzYWdlKGRhdGEpKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzQ2FjaGVhYmxlKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjdXN0b21IZWFkZXJzID0gSlNPTi5wYXJzZShyZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiY3VzdG9tX2hlYWRlcnNcIikpO1xuICAgIGlmIChcbiAgICAgIGN1c3RvbUhlYWRlcnMuaGFzT3duUHJvcGVydHkoXCJ1c2VDYWNoZVwiKSAmJlxuICAgICAgdHlwZW9mIGN1c3RvbUhlYWRlcnMudXNlQ2FjaGUgPT09IFwiYm9vbGVhblwiXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImluc2lkZSBjdXNvdG0gaGVhZGVyc1wiKTtcbiAgICAgIHJldHVybiBjdXN0b21IZWFkZXJzLnVzZUNhY2hlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iXSwic291cmNlUm9vdCI6IiJ9"]}